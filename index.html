<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Âèäåî ïëàòôîðìà — àäàïòèâíî</title>

<!--
  ÂÀÆÍÎ: ñîõðàíèòå ýòîò ôàéë êàê UTF-8 (áåç BOM).
  - Óáåäèòåñü, ÷òî ïåðåä ñòðîêîé <!DOCTYPE html> íåò íèêàêèõ ñèìâîëîâ (ïðîáåëîâ/íîâîé ñòðîêè/BOM).
  - Â ðåäàêòîðå âûáåðèòå "Save with Encoding -> UTF-8" èëè "Convert to UTF-8 (without BOM)".
-->

<style>
  :root{
    --kazakh-blue: #00A3DD;
    --button-yellow: #FFD700;
    --card-bg: rgba(0,0,0,0.12);
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family: Inter, Arial, sans-serif;
    background: var(--kazakh-blue);
    color: #fff;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:14px 18px;
    backdrop-filter: blur(6px);
  }
  .brand{font-weight:700;font-size:18px}

  /* êíîïêà âêë çâóêà ìåíþ */
  .menu-sound-btn{
    background:var(--button-yellow);
    color:#000;
    border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;
  }

  .container{max-width:1200px;margin:10px auto;padding:12px}

  .video-feed{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap:32px; /* óâåëè÷åííîå ðàññòîÿíèå ìåæäó âèäåî */
    align-items:start;
  }

  .video-card{
    background: var(--card-bg);
    border-radius:14px;
    overflow:hidden;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    display:flex;flex-direction:column;
  }

  .video-placeholder{
    background:#000;
    height:190px;
    display:flex;align-items:center;justify-content:center;
    color:#ddd;font-size:15px;
  }

  .video-info{padding:12px;display:flex;gap:8px;flex-direction:column}
  .video-title{font-size:15px;font-weight:600;color:#fff}
  .video-sub{font-size:13px;opacity:0.85}

  .open-btn{
    background:var(--button-yellow);
    color:#000;border:0;padding:10px;border-radius:10px;cursor:pointer;font-weight:700;
  }

  /* âèäåî ñòðàíèöà */
  .video-page{display:none;padding:12px}
  .back-row{display:flex;gap:10px;align-items:center;margin-bottom:12px}
  .back-btn{background:var(--button-yellow);border:0;padding:8px 12px;border-radius:10px;cursor:pointer}
  iframe, video{width:100%;height:60vh;border-radius:12px;border:0}
  @media(max-width:600px){iframe,video{height:42vh}}

  /* ïîäñêàçêà ñ ID */
  .hint{font-size:13px;opacity:0.9}
</style>
</head>
<body>
<header>
  <div class="brand">Âèäåî ïëàòôîðìà</div>
  <div>
    <button id="menuSoundBtn" class="menu-sound-btn">Âêëþ÷èòü çâóê ìåíþ</button>
  </div>
</header>

<main class="container">
  <div id="feed" class="video-feed">
    <!-- Øàáëîí: áóäåò êëîíèðîâàòüñÿ ñêðèïòîì -->
    <template id="videoTemplate">
      <article class="video-card">
        <div class="video-placeholder">Ìåñòî äëÿ âèäåî</div>
        <div class="video-info">
          <div class="video-title">Çàãîëîâîê âèäåî</div>
          <div class="video-sub">Êîðîòêîå îïèñàíèå • 0:00</div>
          <button class="open-btn" data-video="" onclick="openVideo(this.dataset.video, this)">Ñìîòðåòü</button>
        </div>
      </article>
    </template>
  </div>

  <!-- Ñòðàíèöà ïðîñìîòðà -->
  <section id="videoPage" class="video-page">
    <div class="back-row">
      <button class="back-btn" onclick="closeVideo()">? Íàçàä</button>
      <div class="hint">Çäåñü áóäåò ïðîèãðûâàòüñÿ âûáðàííîå âèäåî</div>
    </div>
    <div id="videoContainer"></div>
  </section>
</main>

<!-- Ôîíîâîé çâóê îðëà. Ïî óìîë÷àíèþ íå autoplay, âîñïðîèçâåäåíèå çàïóñêàåòñÿ ïî êíîïêå.
     Ôàéë eagle.mp3 ïîìåñòèòå ðÿäîì ñ ýòèì index.html -->
<audio id="eagleSound" loop preload="auto">
  <source src="the-eerie-scream-of-a-bird-of-prey.mp3" type="audio/mpeg">
  <!-- fallback: áðàóçåð ïîêàæåò, åñëè íå ïîääåðæèâàåòñÿ -->
</audio>

<script>
  const feed = document.getElementById('feed');
  const template = document.getElementById('videoTemplate');
  const videoPage = document.getElementById('videoPage');
  const videoContainer = document.getElementById('videoContainer');
  const eagleSound = document.getElementById('eagleSound');
  const menuSoundBtn = document.getElementById('menuSoundBtn');

  // Ñîçäàòü 25 ìåñò ïîä âèäåî (ìîæíî ïîñòàâèòü 20-30)
  const COUNT = 25;
  for(let i=0;i<COUNT;i++){
    const node = template.content.cloneNode(true);
    const btn = node.querySelector('.open-btn');
    const title = node.querySelector('.video-title');
    const sub = node.querySelector('.video-sub');
    const placeholder = node.querySelector('.video-placeholder');

    // Ïîäñòàâëÿåì ïîäñêàçêó ãäå íóæíî ìåíÿòü íà ñâîé âèäåî ID
    // Àòðèáóò data-video îñòàâèòü ïóñòûì — çàìåíèòå íà íóæíûé embed URL èëè ïóòü ê mp4
    // Ïðèìåðû:
    // 1) YouTube: "https://www.youtube.com/embed/ABC123XYZ"
    // 2) Ñîáñòâåííûé MP4: "myvideo.mp4"
    // 3) Ïëååð HTML5: ìû àâòîìàòè÷åñêè ïîäñòàâèì iframe åñëè ñòðîêà ñîäåðæèò "youtube.com/embed/"

    btn.dataset.video = '';
    title.textContent = `Ìåñòî äëÿ âèäåî #${i+1}`;
    sub.textContent = 'Îïèñàíèå • —';
    placeholder.textContent = 'Çàìåíèòå íà ïðåâüþ / ìèíèàòþðó';

    feed.appendChild(node);
  }

  // Êíîïêà äëÿ âêëþ÷åíèÿ ôîíîâîãî çâóêà (ò.ê. ñîâðåìåííûå áðàóçåðû áëîêèðóþò autoplay àóäèî)
  menuSoundBtn.addEventListener('click', async ()=>{
    try{
      await eagleSound.play();
      menuSoundBtn.style.display='none';
    }catch(e){
      alert('Áðàóçåð íå ðàçðåøèë àâòî-âîñïðîèçâåäåíèå. Ïîïðîáóéòå êëèêíóòü íà ñòðàíèöó åù¸ ðàç.');
    }
  });

  // Îòêðûòü âèäåî (url ìîæåò áûòü YouTube embed èëè ïóòü ê mp4)
  function openVideo(url, btnEl){
    // Åñëè url ïóñòîé — âûäà¸ì ïîäñêàçêó
    if(!url){
      alert('Â ýòîì ìåñòå åù¸ íå óêàçàí âèäåî URL. Îòêðîéòå êîä è âïèøèòå embed-ññûëêó (èëè ïóòü ê mp4) â data-video êíîïêè.');
      return;
    }

    // Îñòàíîâèì ôîíîâûé çâóê ìåíþ
    try{ eagleSound.pause(); }catch(e){}

    // Ñêðûòü ëåíòó è ïîêàçàòü ñòðàíèöó ïðîñìîòðà
    feed.style.display='none';
    videoPage.style.display='block';

    // Ðåøàåì ïî òèïó ññûëêè — YouTube embed èëè mp4
    if(url.includes('youtube.com/embed') || url.includes('youtu.be')){
      // åñëè êîðîòêàÿ youtu.be ññûëêà, êîíâåðòèðîâàòü â embed
      if(url.includes('youtu.be')){
        // ïðåîáðàçîâàòü êîðîòêèé ôîðìàò ê embed
        const id = url.split('/').pop();
        url = 'https://www.youtube.com/embed/' + id;
      }
      videoContainer.innerHTML = `<iframe src="${url}?autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
    }else{
      // ñ÷èòàåì, ÷òî ýòî ëîêàëüíûé mp4
      videoContainer.innerHTML = `
        <video controls autoplay>
          <source src="${url}" type="video/mp4">
          Âàø áðàóçåð íå ïîääåðæèâàåò âèäåî.
        </video>
      `;
    }

    // Ïðîêðóòêà íàâåðõ äëÿ óäîáñòâà
    window.scrollTo({top:0,behavior:'smooth'});
  }

  function closeVideo(){
    videoContainer.innerHTML = '';
    videoPage.style.display = 'none';
    feed.style.display = 'grid';
    // Âêëþ÷àåì ôîíîâîé çâóê (åñëè ïîëüçîâàòåëü ðàíåå íàæàë êíîïêó — çâóê óæå ìîæåò áûòü play)
    try{ eagleSound.play(); }catch(e){}
  }

  // Äîï: óäîáíàÿ ôóíêöèÿ äëÿ áûñòðîãî ìàññîâîãî çàïîëíåíèÿ ññûëêàìè (åñëè õîòèòå — ìîæíî âûçâàòü â êîíñîëè)
  function fillSampleYouTubeIds(ids){
    const buttons = document.querySelectorAll('.open-btn');
    for(let i=0;i<buttons.length && i<ids.length;i++){
      buttons[i].dataset.video = 'https://www.youtube.com/embed/' + ids[i];
      const title = buttons[i].closest('.video-card').querySelector('.video-title');
      title.textContent = 'Âèäåî — ' + (i+1);
    }
    alert('IDs ïîäñòàâëåíû â êíîïêè.');
  }

  // Ýêñïîðò â ãëîáàëüíóþ îáëàñòü äëÿ îòëàäêè (íåîáÿçàòåëüíî)
  window.openVideo = openVideo;
  window.closeVideo = closeVideo;
  window.fillSampleYouTubeIds = fillSampleYouTubeIds;
</script>
</body>
</html>
